<html>
  <body>
    <p>Nombre actual Area: {{ nombreArea }} </p>

    <!-- aqui tambien tengo que ver lo de que se repitan -->

    <form id="formularioNuevoNombreArea" action={% url 'editarArea' %} method="post"> {% csrf_token %}
      {{ form.as_p }}
      <label for="area">Ingrese nuevo nombre de Area: </label>
      <br>
      <input id="nuevoNombreArea" type="text" name="nuevoNombreArea">
      <input type="hidden" id="idArea" type="number" name="idArea" value={{ idArea }}>
      <input type="submit" value="Submit">
    </form>



    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
     {% block javascript %}
       <script>

       //  validar formulario
       $('#formularioNuevoNombreArea').submit(function(e){
         e.preventDefault();
         var form = this;
         var area = $('#nuevoNombreArea').val();
         // formulario no esta vacio
         if (area == null || area == ""){
           alert('Debe ingresar un nombre para el Area');
           return false;
         }
         else{
           // codigo AJAX  para comprobar si el area existe previamente
           $.ajax({
             url: 'ajax/validarArea',
             data: {
               'area': area
             },
             dataType: 'json',
             success: function (data) {
               if (data.is_taken){
                 alert('El Area ingresada ya se encuentra registrada');
                 return false;
               }
               else{
                 form.submit();
               }
           }
         }); // fin AJAX
       }
     });

       </script>
     {% endblock %}


  </body>
</html>
